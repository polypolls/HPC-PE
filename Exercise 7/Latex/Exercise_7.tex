\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{setspace}
\usepackage{listings}
\usepackage{float}
\usepackage{xcolor}
\usepackage{amsmath}
\usepackage{pgfplots}
\usepackage{subcaption}
\usepackage{hyperref}

\title{\textbf{High Performance Computer Architectures Practical Course \\ - Exercise 7 -} \\[10mm]}
\author{Tutorium 1 \\[10mm] David Jordan (6260776) \\[1mm] Florian RÃ¼ffer (7454628) \\[1mm] Michael Samjatin (7485765) \\[10mm]}


\lstset{
    language=C++,
    basicstyle=\ttfamily,
    keywordstyle=\color{blue},
    stringstyle=\color{red},
    commentstyle=\color{green},
    numbers=left,
    numberstyle=\normalsize,
    breaklines=true,
    showstringspaces=false,
    frame=single,
    linewidth=1\linewidth,
    captionpos=b
}
\renewcommand{\lstlistingname}{File}% Listing -> Algorithm
\renewcommand{\lstlistlistingname}{List of \lstlistingname s}% List of Listings -> List of Algorithms

\begin{document}
\maketitle
\newpage
\section*{Section 1}
\section*{Section 2}
\section{Pi}
\subsection{omp parallel and OpenMP}
First, we need to specify the number of threads (in this case 2) and a
variable to store the sums, that are calculated by each thread. Therefore
the array has the lengt of the number of threads, initialized with the
value 0:
\begin{lstlisting}[caption=]
    const int nThreads = 2;
    double sums[nThreads] = {0};
\end{lstlisting}
Another important task is to save the id of the threads, so that they
can be addressed and saved correctly in the "cache-sum-list".
Because we split these steps into 2 threads, each thread only needs
to calculate one half \\(steps / thread\_count). On last thing to pay
attention is the calculation of x. Here we need to factor in the offset
for the current thread. Last but not least we need to calculate the sums
in the "cache-sum-list" and do the final computations.

\subsection*{Least amount of changes}
This can quickly be done by adding one line of code before the loop:
\begin{lstlisting}[caption=]
    #pragma omp parallel for reduction(+ : sum) private(i,x)
\end{lstlisting}
The variables x and i are declared as private variables for safety reasons,
so that they do not interfer with each other. In the solution sum is
declared as one value, and not a list - this is probably for better
data consistency and the correctnerss of the final result.\\
One another advantage of OpenMP is the correctness of the code even if the library
is disabled.




\section*{Section 4}

\begin{lstlisting}[caption=Order 3]
    Double_t background(Double_t *x, Double_t *par) {
   return par[0] + par[1]*x[0] + par[2]*x[0]*x[0] + par[3]*x[0]*x[0]*x[0];
}

\end{lstlisting}

\begin{figure}[H]
    \centering
    \includegraphics[scale=0.3]{example-image.png} 
    \caption{6-order}
    \label{fig:graph}
\end{figure}

  
\end{document}